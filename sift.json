{
  "name": "sift-pixel-tracker",
  "display-name": "Pixel Tracker",
  "description": "This sift detects emails that are being tracked",
  "author": "Deepak Prabhakara",
  "version": "1.0.0",
  "interfaces": {
    "email": {
      "thread": {
        "controller": "dist/js/controller.umd-es2015.js"
      },
      "client": {
        "controller": "dist/js/email-client-controller.umd-es2015.js"
      }
    },
    "summary": {
      "controller": "dist/js/controller.umd-es2015.js"
    }
  },
  "dag": {
    "inputs": {
      "emails": {
        "trackers": {
          "filter": {
            "conditions": [
              {
                "date": "between now and 1 month before now"
              }
            ],
            "wants": [
              "archive",
              "htmlBody"
            ]
          }
        }
      }
    },
    "nodes": [
      {
        "#": "Messages mapper",
        "implementation": {
          "javascript": "server/map.js"
        },
        "input": {
          "bucket": "trackers"
        },
        "outputs": {
          "idList": {},
          "threads": {}
        }
      },
      {
        "#": "Threads aggregator",
        "implementation": {
          "javascript": "server/threads.js"
        },
        "input": {
          "bucket": "threads",
          "select": "/*"
        },
        "outputs": {
          "tidList": {}
        }
      }
    ],
    "stores": {
      "threads": {
        "key$schema": "string/string"
      }
    },
    "outputs": {
      "exports": {
        "idList": {
          "import": "_email.id"
        },
        "tidList": {
          "import": "_email.tid"
        }
      }
    }
  }
}