{
  "name": "sift-pixel-tracker",
  "display-name": "Pixel Tracker",
  "description": "This sift detects tracking emails by detecting 1x1 hidden pixels",
  "author": "Deepak Prabhakara",
  "version": "1.0.0",
  "color": "#842F59",
  "client": {
    "entry-point": "client/controller_cb.js",
    "types": [
      "summary",
      "email-detail"
    ],
    "minimum-size": {
      "width": "compact",
      "height": "compact"
    }
  },
  "app": {
    "entry-point": "client/app_cb.js"
  },
  "dag": {
    "inputs": {
      "emails": {
        "trackers": {
          "filter": {
            "conditions": [
              {
                "date": "between now and 3 months before now"
              }
            ]
          }
        }
      }
    },
    "nodes": [
      {
        "#": "Messages mapper",
        "implementation": {
          "node": "server/map.js"
        },
        "input": {
          "bucket": "trackers"
        },
        "outputs": {
          "messages": {}
        }
      },
      {
        "#": "Messages mapper 2",
        "implementation": {
          "node": "server/map2.js"
        },
        "input": {
          "bucket": "messages"
        },
        "outputs": {
          "idList": {},
          "threads": {}
        }
      },
      {
        "#": "Threads aggregator",
        "implementation": {
          "node": "server/threads.js"
        },
        "input": {
          "bucket": "threads",
          "select": "/*"
        },
        "outputs": {
          "tidList": {}
        }
      }
    ],
    "stores": {
      "messages": {
        "key$schema": "string"
      },
      "threads": {
        "key$schema": "string/string"
      }
    },
    "outputs": {
      "exports": {
        "idList": {
          "import": "_id.list"
        },
        "tidList": {
          "import": "_tid.list"
        }
      }
    }
  }
}